                                                                                                                                                                                                                                                                                                                                                                                                                                                           QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                           
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=389301.25..389301.26 rows=1 width=8) (actual time=884.936..884.942 rows=1 loops=1)
   Buffers: shared hit=62584 read=26578
   ->  Nested Loop  (cost=3726.50..389301.25 rows=1 width=0) (actual time=44.258..884.288 rows=6542 loops=1)
         Buffers: shared hit=62584 read=26578
         ->  Hash Join  (cost=3726.07..389298.93 rows=1 width=4) (actual time=44.219..698.923 rows=6542 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=40451 read=22543
               ->  Nested Loop  (cost=3724.91..389297.72 rows=14 width=8) (actual time=44.030..694.060 rows=34504 loops=1)
                     Buffers: shared hit=40450 read=22543
                     ->  Nested Loop  (cost=3724.47..389254.06 rows=1 width=12) (actual time=43.993..367.995 rows=658 loops=1)
                           Buffers: shared hit=14616 read=12394
                           ->  Nested Loop  (cost=3724.47..389251.64 rows=1 width=16) (actual time=43.986..358.240 rows=658 loops=1)
                                 Buffers: shared hit=13958 read=12394
                                 ->  Nested Loop  (cost=3724.47..389249.22 rows=1 width=20) (actual time=43.967..348.185 rows=658 loops=1)
                                       Buffers: shared hit=13300 read=12394
                                       ->  Hash Join  (cost=3724.04..388020.70 rows=29 width=12) (actual time=43.886..247.232 rows=666 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=6150 read=8759
                                             ->  Nested Loop  (cost=3722.86..388019.35 rows=41 width=16) (actual time=16.388..246.860 rows=790 loops=1)
                                                   Buffers: shared hit=6149 read=8759
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=3722.43..387647.44 rows=44 width=8) (actual time=16.347..213.205 rows=923 loops=1)
                                                         Recheck Cond: (info_type_id = 17)
                                                         Filter: ((info)::text = ANY ('{"ABC originally broadcast this episode in black and white.","Despite the fact that this was filmed in Super 35, \"Filmed in Panavision\" is listed in the end credits.","In September 1928, Warner Bros. Pictures purchased a majority interest in First National Pictures and from that point on, all \"First National\" productions were actually made under Warner Bros. control, even though the two companies continued to retain separate identities until the mid-1930s, after which time \"A Warner Bros.-First National Picture\" was often used.","One of over 700 Paramount Productions, filmed between 1929 and 1949, which were sold to MCA/Universal in 1958 for television distribution, and have been owned and controlled by Universal ever since.","This film is presumed lost. Please check your attic."}'::text[]))
                                                         Rows Removed by Filter: 367295
                                                         Heap Blocks: exact=10925
                                                         Buffers: shared hit=3225 read=7991
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..3722.42 rows=347998 width=0) (actual time=13.301..13.302 rows=368218 loops=1)
                                                               Index Cond: (info_type_id = 17)
                                                               Buffers: shared read=291
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.036..0.036 rows=1 loops=923)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1925))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=2924 read=768
                                             ->  Hash  (cost=1.11..1.11 rows=5 width=4) (actual time=0.024..0.025 rows=5 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.11 rows=5 width=4) (actual time=0.010..0.013 rows=5 loops=1)
                                                         Filter: ((kind)::text = ANY ('{movie,"tv movie","tv series","video game","video movie"}'::text[]))
                                                         Rows Removed by Filter: 2
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..42.35 rows=1 width=8) (actual time=0.067..0.151 rows=1 loops=666)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 7) AND ((info)::text = ANY ('{"CAM:Arriflex 435 ES, Panavision Primo Lenses","OFM:65 mm",OFM:Digital,OFM:HDCAM,"PFM:35 mm"}'::text[])))
                                             Rows Removed by Filter: 40
                                             Buffers: shared hit=7150 read=3635
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.009..0.014 rows=1 loops=658)
                                       Filter: (id = 17)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=658
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.008..0.014 rows=1 loops=658)
                                 Filter: (id = 7)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=658
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.28 rows=38 width=12) (actual time=0.033..0.486 rows=52 loops=658)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=25834 read=10149
               ->  Hash  (cost=1.15..1.15 rows=1 width=4) (actual time=0.035..0.036 rows=1 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=1 width=4) (actual time=0.027..0.029 rows=1 loops=1)
                           Filter: ((role)::text = 'actress'::text)
                           Rows Removed by Filter: 11
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.028..0.028 rows=1 loops=6542)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'f'::text) OR (gender IS NULL))
               Buffers: shared hit=22133 read=4035
 Planning:
   Buffers: shared hit=483 read=91
 Planning Time: 13.872 ms
 Execution Time: 885.557 ms
(72 rows)

