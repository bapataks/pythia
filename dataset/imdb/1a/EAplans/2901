                                                                                                                                                                                                                                                      QUERY PLAN                                                                                                                                                                                                                                                       
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=479040.14..479040.15 rows=1 width=8) (actual time=8918.996..8919.002 rows=1 loops=1)
   Buffers: shared hit=660389 read=123413
   ->  Nested Loop  (cost=7082.04..479040.13 rows=4 width=0) (actual time=56.629..8918.352 rows=1498 loops=1)
         Buffers: shared hit=660389 read=123413
         ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.045..0.051 rows=1 loops=1)
               Filter: (id = 18)
               Rows Removed by Filter: 112
               Buffers: shared hit=1
         ->  Nested Loop  (cost=7082.04..479037.67 rows=4 width=4) (actual time=56.582..8917.873 rows=1498 loops=1)
               Buffers: shared hit=660388 read=123413
               ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.009..0.018 rows=1 loops=1)
                     Filter: (id = 3)
                     Rows Removed by Filter: 112
                     Buffers: shared hit=1
               ->  Nested Loop  (cost=7082.04..479035.22 rows=4 width=8) (actual time=56.570..8917.410 rows=1498 loops=1)
                     Buffers: shared hit=660387 read=123413
                     ->  Hash Join  (cost=7081.61..478993.47 rows=18 width=12) (actual time=21.869..7531.159 rows=31617 loops=1)
                           Hash Cond: (ci.role_id = rt.id)
                           Buffers: shared hit=545074 read=112258
                           ->  Nested Loop  (cost=7080.40..478992.01 rows=72 width=16) (actual time=21.790..7477.719 rows=272265 loops=1)
                                 Buffers: shared hit=545073 read=112258
                                 ->  Nested Loop  (cost=7079.96..478769.24 rows=5 width=20) (actual time=21.758..4151.391 rows=8665 loops=1)
                                       Buffers: shared hit=298680 read=66697
                                       ->  Hash Join  (cost=7079.50..473873.54 rows=114 width=12) (actual time=21.659..2237.473 rows=13842 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=163442 read=26339
                                             ->  Nested Loop  (cost=7078.33..473871.70 rows=159 width=16) (actual time=21.617..2230.394 rows=13843 loops=1)
                                                   Buffers: shared hit=163441 read=26339
                                                   ->  Bitmap Heap Scan on movie_info mi2  (cost=7077.90..466633.50 rows=880 width=8) (actual time=21.470..453.231 rows=45572 loops=1)
                                                         Recheck Cond: (info_type_id = 18)
                                                         Filter: ((info)::text = ANY ('{"Barcelona, CataluÃ±a, Spain","Chicago, Illinois, USA","Iverson Ranch - 1 Iverson Lane, Chatsworth, Los Angeles, California, USA","London, England, UK","Mexico City, Distrito Federal, Mexico","New York City, New York, USA","Paramount Studios - 5555 Melrose Avenue, Hollywood, Los Angeles, California, USA","Paris, France","Pinewood Studios, Iver Heath, Buckinghamshire, England, UK","Rome, Lazio, Italy"}'::text[]))
                                                         Rows Removed by Filter: 615351
                                                         Heap Blocks: exact=6972
                                                         Buffers: shared hit=1299 read=6193
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..7077.68 rows=662032 width=0) (actual time=20.602..20.603 rows=660923 loops=1)
                                                               Index Cond: (info_type_id = 18)
                                                               Buffers: shared hit=1 read=519
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.23 rows=1 width=8) (actual time=0.038..0.038 rows=0 loops=45572)
                                                         Index Cond: (id = mi2.movie_id)
                                                         Filter: ((production_year <= 1975) AND (production_year >= 1875))
                                                         Rows Removed by Filter: 1
                                                         Buffers: shared hit=162142 read=20146
                                             ->  Hash  (cost=1.11..1.11 rows=5 width=4) (actual time=0.019..0.020 rows=5 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.11 rows=5 width=4) (actual time=0.009..0.011 rows=5 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv movie","tv series","video game"}'::text[]))
                                                         Rows Removed by Filter: 2
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi1  (cost=0.46..42.93 rows=1 width=8) (actual time=0.137..0.138 rows=1 loops=13842)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 3) AND ((info)::text = ANY ('{Adventure,Comedy,Crime,Drama,Family,History,Horror,Music,Mystery,News,Short}'::text[])))
                                             Rows Removed by Filter: 20
                                             Buffers: shared hit=135238 read=40358
                                 ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..44.17 rows=38 width=12) (actual time=0.044..0.375 rows=31 loops=8665)
                                       Index Cond: (movie_id = t.id)
                                       Buffers: shared hit=246393 read=45561
                           ->  Hash  (cost=1.17..1.17 rows=3 width=4) (actual time=0.024..0.024 rows=3 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                 Buffers: shared hit=1
                                 ->  Seq Scan on role_type rt  (cost=0.00..1.17 rows=3 width=4) (actual time=0.012..0.015 rows=3 loops=1)
                                       Filter: ((role)::text = ANY ('{cinematographer,director,"miscellaneous crew"}'::text[]))
                                       Rows Removed by Filter: 9
                                       Buffers: shared hit=1
                     ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.043..0.043 rows=0 loops=31617)
                           Index Cond: (id = ci.person_id)
                           Filter: ((gender)::text = 'f'::text)
                           Rows Removed by Filter: 1
                           Buffers: shared hit=115313 read=11155
 Planning:
   Buffers: shared hit=576 read=1
 Planning Time: 13.793 ms
 Execution Time: 8919.554 ms
(73 rows)

