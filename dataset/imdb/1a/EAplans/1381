                                                                                            QUERY PLAN                                                                                             
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=343945.38..343945.39 rows=1 width=8) (actual time=2932.800..2932.806 rows=1 loops=1)
   Buffers: shared hit=265162 read=32125
   ->  Nested Loop  (cost=48525.97..343945.37 rows=3 width=0) (actual time=178.902..2932.213 rows=4806 loops=1)
         Buffers: shared hit=265162 read=32125
         ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.043..0.048 rows=1 loops=1)
               Filter: (id = 7)
               Rows Removed by Filter: 112
               Buffers: shared hit=1
         ->  Nested Loop  (cost=48525.97..343942.93 rows=3 width=4) (actual time=178.857..2931.556 rows=4806 loops=1)
               Buffers: shared hit=265161 read=32125
               ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.009..0.014 rows=1 loops=1)
                     Filter: (id = 3)
                     Rows Removed by Filter: 112
                     Buffers: shared hit=1
               ->  Nested Loop  (cost=48525.97..343940.48 rows=3 width=8) (actual time=178.847..2930.898 rows=4806 loops=1)
                     Join Filter: (t.id = mi1.movie_id)
                     Buffers: shared hit=265160 read=32125
                     ->  Nested Loop  (cost=48525.53..341058.44 rows=68 width=16) (actual time=177.300..2527.353 rows=4574 loops=1)
                           Join Filter: (t.id = mi2.movie_id)
                           Buffers: shared hit=217486 read=28600
                           ->  Nested Loop  (cost=48525.10..213963.17 rows=3006 width=8) (actual time=177.261..2310.133 rows=2362 loops=1)
                                 Buffers: shared hit=195350 read=25152
                                 ->  Hash Join  (cost=48524.67..183943.94 rows=12942 width=12) (actual time=173.062..1287.968 rows=46299 loops=1)
                                       Hash Cond: (ci.movie_id = t.id)
                                       Buffers: shared hit=17204 read=18102
                                       ->  Nested Loop  (cost=0.44..123965.00 rows=3020080 width=8) (actual time=0.209..786.496 rows=2728943 loops=1)
                                             Buffers: shared hit=3817 read=18102
                                             ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=1 width=4) (actual time=0.009..0.012 rows=1 loops=1)
                                                   Filter: ((role)::text = 'writer'::text)
                                                   Rows Removed by Filter: 11
                                                   Buffers: shared hit=1
                                             ->  Index Scan using role_id_cast_info on cast_info ci  (cost=0.44..91017.52 rows=3294633 width=12) (actual time=0.194..523.513 rows=2728943 loops=1)
                                                   Index Cond: (role_id = rt.id)
                                                   Buffers: shared hit=3816 read=18102
                                       ->  Hash  (cost=48388.79..48388.79 rows=10835 width=4) (actual time=172.363..172.365 rows=74873 loops=1)
                                             Buckets: 131072 (originally 16384)  Batches: 1 (originally 1)  Memory Usage: 3657kB
                                             Buffers: shared hit=13387
                                             ->  Nested Loop  (cost=4496.00..48388.79 rows=10835 width=4) (actual time=22.551..161.547 rows=74873 loops=1)
                                                   Buffers: shared hit=13387
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.09 rows=1 width=4) (actual time=0.010..0.012 rows=1 loops=1)
                                                         Filter: ((kind)::text = 'movie'::text)
                                                         Rows Removed by Filter: 6
                                                         Buffers: shared hit=1
                                                   ->  Bitmap Heap Scan on title t  (cost=4496.00..48261.29 rows=12641 width=8) (actual time=22.538..157.102 rows=74873 loops=1)
                                                         Recheck Cond: (kind_id = kt.id)
                                                         Filter: ((production_year <= 1925) AND (1910 < production_year))
                                                         Rows Removed by Filter: 587952
                                                         Heap Blocks: exact=12865
                                                         Buffers: shared hit=13386
                                                         ->  Bitmap Index Scan on kind_id_title  (cost=0.00..4492.84 rows=421388 width=0) (actual time=20.587..20.587 rows=662825 loops=1)
                                                               Index Cond: (kind_id = kt.id)
                                                               Buffers: shared hit=521
                                 ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.022..0.022 rows=0 loops=46299)
                                       Index Cond: (id = ci.person_id)
                                       Filter: ((gender)::text = 'f'::text)
                                       Rows Removed by Filter: 1
                                       Buffers: shared hit=178146 read=7050
                           ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..42.27 rows=1 width=8) (actual time=0.062..0.091 rows=2 loops=2362)
                                 Index Cond: (movie_id = ci.movie_id)
                                 Filter: ((info_type_id = 7) AND ((info)::text = ANY ('{"MET:100 m","MET:200 m","MET:300 m","MET:600 m","OFM:35 mm","PFM:35 mm"}'::text[])))
                                 Rows Removed by Filter: 11
                                 Buffers: shared hit=22136 read=3448
                     ->  Index Scan using movie_id_movie_info on movie_info mi1  (cost=0.43..42.37 rows=1 width=8) (actual time=0.087..0.088 rows=1 loops=4574)
                           Index Cond: (movie_id = ci.movie_id)
                           Filter: ((info_type_id = 3) AND ((info)::text = ANY ('{Comedy,Crime,Documentary,Romance,Short,Thriller,War,Western}'::text[])))
                           Rows Removed by Filter: 13
                           Buffers: shared hit=47674 read=3525
 Planning:
   Buffers: shared hit=574
 Planning Time: 13.784 ms
 Execution Time: 2933.363 ms
(71 rows)

