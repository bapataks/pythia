                                                                                                                                                                                                                                                                                                           QUERY PLAN                                                                                                                                                                                                                                                                                                            
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=443887.69..443887.70 rows=1 width=8) (actual time=2673.905..2673.913 rows=1 loops=1)
   Buffers: shared hit=238408 read=37163
   ->  Nested Loop  (cost=7083.24..443887.69 rows=2 width=0) (actual time=29.543..2673.837 rows=246 loops=1)
         Buffers: shared hit=238408 read=37163
         ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.046..0.054 rows=1 loops=1)
               Filter: (id = 8)
               Rows Removed by Filter: 112
               Buffers: shared hit=1
         ->  Nested Loop  (cost=7083.24..443885.25 rows=2 width=4) (actual time=29.496..2673.726 rows=246 loops=1)
               Buffers: shared hit=238407 read=37163
               ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.014..0.023 rows=1 loops=1)
                     Filter: (id = 18)
                     Rows Removed by Filter: 112
                     Buffers: shared hit=1
               ->  Nested Loop  (cost=7083.24..443882.82 rows=2 width=8) (actual time=29.479..2673.643 rows=246 loops=1)
                     Buffers: shared hit=238406 read=37163
                     ->  Hash Join  (cost=7082.81..443866.60 rows=7 width=12) (actual time=29.435..2660.987 rows=346 loops=1)
                           Hash Cond: (ci.role_id = rt.id)
                           Buffers: shared hit=237465 read=36720
                           ->  Nested Loop  (cost=7081.64..443865.14 rows=86 width=16) (actual time=23.069..2658.564 rows=14768 loops=1)
                                 Buffers: shared hit=237464 read=36720
                                 ->  Nested Loop  (cost=7081.20..443598.97 rows=6 width=20) (actual time=23.029..2481.777 rows=977 loops=1)
                                       Buffers: shared hit=225877 read=30860
                                       ->  Hash Join  (cost=7080.77..419581.69 rows=556 width=12) (actual time=21.716..2312.942 rows=1633 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=214536 read=24281
                                             ->  Nested Loop  (cost=7079.63..419575.09 rows=1298 width=16) (actual time=21.673..2308.751 rows=19125 loops=1)
                                                   Buffers: shared hit=214535 read=24281
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=7079.19..377309.01 rows=5928 width=8) (actual time=21.543..282.152 rows=59362 loops=1)
                                                         Recheck Cond: (info_type_id = 18)
                                                         Filter: ((info)::text = ANY ('{"Buenos Aires, Federal District, Argentina","CBS Studio 50, New York City, New York, USA","CBS Television City - 7800 Beverly Blvd., Fairfax, Los Angeles, California, USA","Chicago, Illinois, USA","Lisbon, Portugal","Mexico City, Distrito Federal, Mexico",Mexico,"New York City, New York, USA","Paris, France",Philippines,"Revue Studios, Hollywood, Los Angeles, California, USA","San Francisco, California, USA","Shepperton Studios, Shepperton, Surrey, England, UK",Spain,"Sydney, New South Wales, Australia"}'::text[]))
                                                         Rows Removed by Filter: 601561
                                                         Heap Blocks: exact=6972
                                                         Buffers: shared hit=922 read=6570
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..7077.68 rows=662032 width=0) (actual time=20.669..20.669 rows=660923 loops=1)
                                                               Index Cond: (info_type_id = 18)
                                                               Buffers: shared hit=1 read=519
                                                   ->  Memoize  (cost=0.44..7.17 rows=1 width=8) (actual time=0.034..0.034 rows=0 loops=59362)
                                                         Cache Key: mi1.movie_id
                                                         Cache Mode: logical
                                                         Hits: 1531  Misses: 57831  Evictions: 0  Overflows: 0  Memory Usage: 4577kB
                                                         Buffers: shared hit=213613 read=17711
                                                         ->  Index Scan using title_pkey on title t  (cost=0.43..7.16 rows=1 width=8) (actual time=0.034..0.034 rows=0 loops=57831)
                                                               Index Cond: (id = mi1.movie_id)
                                                               Filter: ((production_year <= 1990) AND (production_year >= 1950))
                                                               Rows Removed by Filter: 1
                                                               Buffers: shared hit=213613 read=17711
                                             ->  Hash  (cost=1.10..1.10 rows=3 width=4) (actual time=0.019..0.019 rows=3 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.10 rows=3 width=4) (actual time=0.010..0.012 rows=3 loops=1)
                                                         Filter: ((kind)::text = ANY ('{"tv series","video game","video movie"}'::text[]))
                                                         Rows Removed by Filter: 4
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..43.19 rows=1 width=8) (actual time=0.096..0.103 rows=1 loops=1633)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 8) AND ((info)::text = ANY ('{Argentina,Australia,Belgium,Brazil,Canada,Finland,France,India,Italy,Mexico,Netherlands,Philippines}'::text[])))
                                             Rows Removed by Filter: 13
                                             Buffers: shared hit=11341 read=6579
                                 ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.98 rows=38 width=12) (actual time=0.043..0.177 rows=15 loops=977)
                                       Index Cond: (movie_id = t.id)
                                       Buffers: shared hit=11587 read=5860
                           ->  Hash  (cost=1.15..1.15 rows=1 width=4) (actual time=0.017..0.018 rows=1 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                 Buffers: shared hit=1
                                 ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=1 width=4) (actual time=0.010..0.011 rows=1 loops=1)
                                       Filter: ((role)::text = 'miscellaneous crew'::text)
                                       Rows Removed by Filter: 11
                                       Buffers: shared hit=1
                     ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.036..0.036 rows=1 loops=346)
                           Index Cond: (id = ci.person_id)
                           Filter: (gender IS NULL)
                           Rows Removed by Filter: 0
                           Buffers: shared hit=941 read=443
 Planning:
   Buffers: shared hit=577
 Planning Time: 13.004 ms
 Execution Time: 2675.525 ms
(78 rows)

