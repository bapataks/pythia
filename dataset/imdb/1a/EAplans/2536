                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=418060.89..418060.90 rows=1 width=8) (actual time=504.881..504.887 rows=1 loops=1)
   Buffers: shared hit=24263 read=24717
   ->  Nested Loop  (cost=3725.49..418060.88 rows=1 width=0) (actual time=34.260..504.863 rows=51 loops=1)
         Buffers: shared hit=24263 read=24717
         ->  Hash Join  (cost=3725.06..418056.25 rows=2 width=4) (actual time=18.771..483.784 rows=653 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=22495 read=23873
               ->  Nested Loop  (cost=3723.88..418055.03 rows=14 width=8) (actual time=18.637..483.370 rows=2847 loops=1)
                     Buffers: shared hit=22494 read=23873
                     ->  Nested Loop  (cost=3723.44..418010.17 rows=1 width=12) (actual time=18.604..457.563 rows=82 loops=1)
                           Buffers: shared hit=20197 read=23121
                           ->  Nested Loop  (cost=3723.44..418007.75 rows=1 width=16) (actual time=18.599..456.840 rows=82 loops=1)
                                 Buffers: shared hit=20115 read=23121
                                 ->  Nested Loop  (cost=3723.44..418005.33 rows=1 width=20) (actual time=18.563..455.643 rows=82 loops=1)
                                       Buffers: shared hit=20033 read=23121
                                       ->  Nested Loop  (cost=3723.01..417788.95 rows=5 width=12) (actual time=17.784..267.524 rows=1720 loops=1)
                                             Buffers: shared hit=6889 read=13983
                                             ->  Nested Loop  (cost=3722.87..417787.76 rows=9 width=16) (actual time=17.764..266.730 rows=1720 loops=1)
                                                   Buffers: shared hit=6885 read=13983
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=3722.44..417263.71 rows=62 width=8) (actual time=17.359..194.454 rows=2413 loops=1)
                                                         Recheck Cond: (info_type_id = 17)
                                                         Filter: ((info)::text = ANY ('{"In September 1928, Warner Bros. Pictures purchased a majority interest in First National Pictures and from that point on, all \"First National\" productions were actually made under Warner Bros. control, even though the two companies continued to retain separate identities until the mid-1930s, after which time \"A Warner Bros.-First National Picture\" was often used.","Last show of the series.","One of over 700 Paramount Productions, filmed between 1929 and 1949, which were sold to MCA/Universal in 1958 for television distribution, and have been owned and controlled by Universal ever since.","One of over 700 Paramount productions, filmed between 1929 and 1949, which were sold to MCA/Universal in 1958 for television distribution, and have been owned and controlled by Universal ever since.","The failure of the original copyright holder to renew the films copyright resulted in it falling into public domain, meaning that virtually anyone could duplicate and sell a VHS/DVD copy of the film. Therefore, many of the versions of this film available on the market are either severely (and usually badly) edited and/or of extremely poor quality, having been duped from second- or third-generation (or more) copies of the film.","This film is believed lost. Please check your attic.","This film is presumed lost. Please check your attic."}'::text[]))
                                                         Rows Removed by Filter: 365805
                                                         Heap Blocks: exact=10925
                                                         Buffers: shared hit=1168 read=10048
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..3722.42 rows=347998 width=0) (actual time=15.734..15.735 rows=368218 loops=1)
                                                               Index Cond: (info_type_id = 17)
                                                               Buffers: shared hit=1 read=290
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.030..0.030 rows=1 loops=2413)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 1975) AND (production_year >= 1925))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=5717 read=3935
                                             ->  Memoize  (cost=0.14..0.17 rows=1 width=4) (actual time=0.000..0.000 rows=1 loops=1720)
                                                   Cache Key: t.kind_id
                                                   Cache Mode: logical
                                                   Hits: 1718  Misses: 2  Evictions: 0  Overflows: 0  Memory Usage: 1kB
                                                   Buffers: shared hit=4
                                                   ->  Index Scan using kind_type_pkey on kind_type kt  (cost=0.13..0.16 rows=1 width=4) (actual time=0.012..0.012 rows=1 loops=2)
                                                         Index Cond: (id = t.kind_id)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv movie","tv series"}'::text[]))
                                                         Buffers: shared hit=4
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..43.27 rows=1 width=8) (actual time=0.104..0.109 rows=0 loops=1720)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 7) AND ((info)::text = ANY ('{LAB:DeLuxe,"LAB:DeLuxe, USA",MET:,PCS:Todd-AO,"PFM:8 mm","RAT:1.78 : 1","RAT:2.20 : 1"}'::text[])))
                                             Rows Removed by Filter: 18
                                             Buffers: shared hit=13144 read=9138
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.009..0.013 rows=1 loops=82)
                                       Filter: (id = 17)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=82
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=82)
                                 Filter: (id = 7)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=82
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..44.48 rows=38 width=12) (actual time=0.022..0.310 rows=35 loops=82)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=2297 read=752
               ->  Hash  (cost=1.15..1.15 rows=2 width=4) (actual time=0.036..0.037 rows=2 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=2 width=4) (actual time=0.025..0.028 rows=2 loops=1)
                           Filter: ((role)::text = ANY ('{actress,producer}'::text[]))
                           Rows Removed by Filter: 10
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.032..0.032 rows=0 loops=653)
               Index Cond: (id = ci.person_id)
               Filter: (gender IS NULL)
               Rows Removed by Filter: 1
               Buffers: shared hit=1768 read=844
 Planning:
   Buffers: shared hit=574
 Planning Time: 14.116 ms
 Execution Time: 505.400 ms
(74 rows)

