                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=375536.40..375536.41 rows=1 width=8) (actual time=200.695..200.703 rows=1 loops=1)
   Buffers: shared hit=4067 read=9472
   ->  Nested Loop  (cost=3726.61..375536.39 rows=3 width=0) (actual time=47.604..200.681 rows=160 loops=1)
         Buffers: shared hit=4067 read=9472
         ->  Hash Join  (cost=3726.18..375524.79 rows=5 width=4) (actual time=47.563..196.701 rows=160 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=3433 read=9466
               ->  Nested Loop  (cost=3724.95..375523.52 rows=14 width=8) (actual time=47.496..196.542 rows=896 loops=1)
                     Buffers: shared hit=3432 read=9466
                     ->  Nested Loop  (cost=3724.51..375479.78 rows=1 width=12) (actual time=47.462..189.500 rows=32 loops=1)
                           Buffers: shared hit=2468 read=9438
                           ->  Nested Loop  (cost=3724.51..375477.36 rows=1 width=16) (actual time=47.456..189.220 rows=32 loops=1)
                                 Buffers: shared hit=2436 read=9438
                                 ->  Nested Loop  (cost=3724.51..375474.94 rows=1 width=20) (actual time=47.436..188.921 rows=32 loops=1)
                                       Buffers: shared hit=2404 read=9438
                                       ->  Hash Join  (cost=3724.07..373593.05 rows=44 width=12) (actual time=47.316..183.103 rows=8 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=2002 read=9400
                                             ->  Nested Loop  (cost=3722.90..373591.61 rows=62 width=16) (actual time=47.266..183.045 rows=8 loops=1)
                                                   Buffers: shared hit=2001 read=9400
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=3722.47..372839.34 rows=89 width=8) (actual time=47.228..182.923 rows=8 loops=1)
                                                         Recheck Cond: (info_type_id = 17)
                                                         Filter: ((info)::text = ANY ('{"After the race, John Vito and Jill (Season 3) hosted a show that promoted Singapore tourism.","As of Leg 4 (Season 11), Danielle became the first person to finish higher than their original race. As of Leg 8 Charla & Mirna became the first team to finish higher than their original race.","At the age of 14, Rolly Weaver (Season 8) is the youngest person to ever win a leg and to make it to the Final Three.","In Season 9, three new countries got their first visit from the Race: Greece, Oman, and Japan, as well as the Sicily region of Italy.","Jill Aquilino originally applied with her brother for the first season of The Amazing Race.","John Keoghan, Phil Keoghan (qv)s father, was the local greeter at the Te Puke Pit Stop in New Zealand in Season 13.","Linda Weaver (Season 8) reluctantly participated in two challenges directly related to racing. One was a go-kart race in Arizona, and the other involved traveling around Talladega Superspeedway in a bicycle. Weavers husband, Roy, was killed in an accident when he was run over by a race car at Daytona International Speedway in 2004.","On Leg 8, Colin (Season 5) almost went to jail having an argument with the cab driver. Colin wanted to give the cab driver $50, but the cab driver needed $100.","Season 5 featured the first African-American and the oldest couple to win the Race (Chip & Kim), as well as the first team to win without using a Fast Foward.","The \"Sledging\" Detour at Okere Falls in Rotorua, New Zealand in Episode 10 is no longer a tourist activity. It was shut down by New Zealand authorities shortly after the show screened and interest in it increased, because it was deemed not safe enough. It has now reopened and is safe."}'::text[]))
                                                         Rows Removed by Filter: 368210
                                                         Heap Blocks: exact=10925
                                                         Buffers: shared hit=1969 read=9400
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..3722.42 rows=347998 width=0) (actual time=14.179..14.179 rows=368218 loops=1)
                                                               Index Cond: (info_type_id = 17)
                                                               Buffers: shared hit=1 read=290
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.013..0.013 rows=1 loops=8)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1990))
                                                         Buffers: shared hit=32
                                             ->  Hash  (cost=1.11..1.11 rows=5 width=4) (actual time=0.020..0.021 rows=5 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.11 rows=5 width=4) (actual time=0.011..0.013 rows=5 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv movie","tv series","video movie"}'::text[]))
                                                         Rows Removed by Filter: 2
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..42.76 rows=1 width=8) (actual time=0.223..0.726 rows=4 loops=8)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 18) AND ((info)::text = ANY ('{"Buenos Aires, Federal District, Argentina","Downtown, Los Angeles, California, USA","Ealing Studios, Ealing, London, England, UK","Istanbul, Turkey","Louisiana, USA","Moab, Utah, USA","New York, USA","Pittsburgh, Pennsylvania, USA","Seattle, Washington, USA","Sony Pictures Studios - 10202 W. Washington Blvd., Culver City, California, USA","Stage 25, Warner Brothers Burbank Studios - 4000 Warner Boulevard, Burbank, California, USA","Upper Hutt, Wellington, New Zealand"}'::text[])))
                                             Rows Removed by Filter: 1580
                                             Buffers: shared hit=402 read=38
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=32)
                                       Filter: (id = 17)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=32
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=32)
                                 Filter: (id = 18)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=32
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.35 rows=38 width=12) (actual time=0.045..0.216 rows=28 loops=32)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=964 read=28
               ->  Hash  (cost=1.18..1.18 rows=4 width=4) (actual time=0.040..0.040 rows=4 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.18 rows=4 width=4) (actual time=0.028..0.033 rows=4 loops=1)
                           Filter: ((role)::text = ANY ('{actor,cinematographer,editor,writer}'::text[]))
                           Rows Removed by Filter: 8
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.025..0.025 rows=1 loops=160)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'm'::text) OR (gender IS NULL))
               Buffers: shared hit=634 read=6
 Planning:
   Buffers: shared hit=576 read=1
 Planning Time: 13.472 ms
 Execution Time: 201.232 ms
(71 rows)

