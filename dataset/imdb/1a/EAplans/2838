                                                                                                                                                                                                             QUERY PLAN                                                                                                                                                                                                              
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=423545.90..423545.91 rows=1 width=8) (actual time=684.787..684.795 rows=1 loops=1)
   Buffers: shared hit=56646 read=12182
   ->  Nested Loop  (cost=7081.78..423545.90 rows=1 width=0) (actual time=170.470..684.783 rows=5 loops=1)
         Buffers: shared hit=56646 read=12182
         ->  Hash Join  (cost=7081.35..423543.58 rows=1 width=4) (actual time=170.411..684.593 rows=5 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=56632 read=12176
               ->  Nested Loop  (cost=7080.19..423542.37 rows=14 width=8) (actual time=24.707..684.511 rows=89 loops=1)
                     Buffers: shared hit=56631 read=12176
                     ->  Nested Loop  (cost=7079.75..423497.51 rows=1 width=12) (actual time=24.673..683.586 rows=7 loops=1)
                           Buffers: shared hit=56580 read=12117
                           ->  Nested Loop  (cost=7079.75..423495.09 rows=1 width=16) (actual time=24.667..683.509 rows=7 loops=1)
                                 Buffers: shared hit=56573 read=12117
                                 ->  Nested Loop  (cost=7079.75..423492.66 rows=1 width=20) (actual time=24.650..683.378 rows=7 loops=1)
                                       Buffers: shared hit=56566 read=12117
                                       ->  Hash Join  (cost=7079.31..422969.05 rows=12 width=12) (actual time=23.768..642.363 rows=501 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=52048 read=10737
                                             ->  Nested Loop  (cost=7078.13..422967.81 rows=17 width=16) (actual time=23.724..641.818 rows=2406 loops=1)
                                                   Buffers: shared hit=52047 read=10737
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=7077.70..421970.41 rows=118 width=8) (actual time=22.222..254.166 rows=13823 loops=1)
                                                         Recheck Cond: (info_type_id = 18)
                                                         Filter: ((info)::text = ANY ('{"Denham Studios, Denham, Buckinghamshire, England, UK","Janss Conejo Ranch, Thousand Oaks, California, USA","London, England, UK","Pinewood Studios, Iver Heath, Buckinghamshire, England, UK","Rome, Lazio, Italy","San Francisco, California, USA","Twickenham Film Studios, St Margarets, Twickenham, Middlesex, England, UK"}'::text[]))
                                                         Rows Removed by Filter: 647100
                                                         Heap Blocks: exact=6972
                                                         Buffers: shared hit=1164 read=6328
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..7077.68 rows=662032 width=0) (actual time=21.245..21.245 rows=660923 loops=1)
                                                               Index Cond: (info_type_id = 18)
                                                               Buffers: shared hit=1 read=519
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.028..0.028 rows=0 loops=13823)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 1975) AND (production_year >= 1925))
                                                         Rows Removed by Filter: 1
                                                         Buffers: shared hit=50883 read=4409
                                             ->  Hash  (cost=1.11..1.11 rows=5 width=4) (actual time=0.019..0.020 rows=5 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.11 rows=5 width=4) (actual time=0.010..0.012 rows=5 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,"tv movie","tv series","video game","video movie"}'::text[]))
                                                         Rows Removed by Filter: 2
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..43.62 rows=1 width=8) (actual time=0.081..0.081 rows=0 loops=501)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 5) AND ((info)::text = ANY ('{Argentina:13,Brazil:14,Finland:K-12,Finland:K-16,Finland:K-18,France:-12,Italy:VM18,Norway:16,Sweden:Btl,USA:PG,USA:TV-G,USA:TV-PG,USA:X,"West Germany:16"}'::text[])))
                                             Rows Removed by Filter: 18
                                             Buffers: shared hit=4518 read=1380
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.010..0.014 rows=1 loops=7)
                                       Filter: (id = 18)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=7
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.004..0.009 rows=1 loops=7)
                                 Filter: (id = 5)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=7
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..44.48 rows=38 width=12) (actual time=0.030..0.128 rows=13 loops=7)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=51 read=59
               ->  Hash  (cost=1.15..1.15 rows=1 width=4) (actual time=0.037..0.038 rows=1 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=1 width=4) (actual time=0.028..0.029 rows=1 loops=1)
                           Filter: ((role)::text = 'director'::text)
                           Rows Removed by Filter: 11
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.036..0.036 rows=1 loops=5)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'm'::text) OR (gender IS NULL))
               Buffers: shared hit=14 read=6
 Planning:
   Buffers: shared hit=574
 Planning Time: 13.610 ms
 Execution Time: 685.320 ms
(72 rows)

