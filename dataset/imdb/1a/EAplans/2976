                                                                                                        QUERY PLAN                                                                                                         
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=436223.01..436223.02 rows=1 width=8) (actual time=950.801..950.807 rows=1 loops=1)
   Buffers: shared hit=26121 read=32309
   ->  Nested Loop  (cost=32182.66..436222.98 rows=12 width=0) (actual time=125.719..950.729 rows=433 loops=1)
         Buffers: shared hit=26121 read=32309
         ->  Hash Join  (cost=32182.23..436167.31 rows=24 width=4) (actual time=125.676..920.673 rows=1836 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=20225 read=30861
               ->  Nested Loop  (cost=32181.00..436165.83 rows=72 width=8) (actual time=125.609..920.086 rows=3180 loops=1)
                     Buffers: shared hit=20224 read=30861
                     ->  Nested Loop  (cost=32180.56..435947.53 rows=5 width=12) (actual time=125.566..897.603 rows=309 loops=1)
                           Buffers: shared hit=17825 read=29253
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.022..0.026 rows=1 loops=1)
                                 Filter: (id = 16)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=1
                           ->  Nested Loop  (cost=32180.56..435945.07 rows=5 width=16) (actual time=125.543..897.519 rows=309 loops=1)
                                 Buffers: shared hit=17824 read=29253
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.006..0.014 rows=1 loops=1)
                                       Filter: (id = 3)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=1
                                 ->  Nested Loop  (cost=32180.56..435942.61 rows=5 width=20) (actual time=125.534..897.436 rows=309 loops=1)
                                       Buffers: shared hit=17823 read=29253
                                       ->  Hash Join  (cost=32180.09..429421.64 rows=154 width=12) (actual time=98.750..860.193 rows=1015 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=11433 read=26965
                                             ->  Nested Loop  (cost=32178.96..429419.00 rows=359 width=16) (actual time=83.451..859.646 rows=2636 loops=1)
                                                   Buffers: shared hit=11432 read=26965
                                                   ->  Bitmap Heap Scan on movie_info mi2  (cost=32178.53..426213.24 rows=384 width=8) (actual time=83.405..780.112 rows=2636 loops=1)
                                                         Recheck Cond: (info_type_id = 16)
                                                         Filter: ((info)::text = ANY ('{Nigeria:2005,"USA:15 October 2011",USA:1993,"USA:January 2010","USA:May 2009"}'::text[]))
                                                         Rows Removed by Filter: 3034083
                                                         Heap Blocks: exact=25474
                                                         Buffers: shared hit=2877 read=24976
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..32178.44 rows=3010400 width=0) (actual time=77.849..77.849 rows=3036719 loops=1)
                                                               Index Cond: (info_type_id = 16)
                                                               Buffers: shared hit=1 read=2378
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.35 rows=1 width=8) (actual time=0.030..0.030 rows=1 loops=2636)
                                                         Index Cond: (id = mi2.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1925))
                                                         Buffers: shared hit=8555 read=1989
                                             ->  Hash  (cost=1.10..1.10 rows=3 width=4) (actual time=0.015..0.015 rows=3 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.10 rows=3 width=4) (actual time=0.008..0.009 rows=3 loops=1)
                                                         Filter: ((kind)::text = ANY ('{"tv movie","tv series","video movie"}'::text[]))
                                                         Rows Removed by Filter: 4
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi1  (cost=0.47..42.33 rows=1 width=8) (actual time=0.036..0.036 rows=0 loops=1015)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 3) AND ((info)::text = ANY ('{Action,Adventure,Animation,Comedy,Fantasy,Film-Noir,Music,Reality-TV,Short,Talk-Show,Thriller,War,Western}'::text[])))
                                             Rows Removed by Filter: 6
                                             Buffers: shared hit=6390 read=2288
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.28 rows=38 width=12) (actual time=0.018..0.071 rows=10 loops=309)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=2399 read=1608
               ->  Hash  (cost=1.18..1.18 rows=4 width=4) (actual time=0.035..0.035 rows=4 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.18 rows=4 width=4) (actual time=0.025..0.028 rows=4 loops=1)
                           Filter: ((role)::text = ANY ('{actor,cinematographer,composer,producer}'::text[]))
                           Rows Removed by Filter: 8
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.016..0.016 rows=0 loops=1836)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'f'::text) OR (gender IS NULL))
               Rows Removed by Filter: 1
               Buffers: shared hit=5896 read=1448
 Planning:
   Buffers: shared hit=577
 Planning Time: 13.424 ms
 Execution Time: 951.378 ms
(72 rows)

