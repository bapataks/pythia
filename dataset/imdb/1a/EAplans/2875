                                                                                                                                                                               QUERY PLAN                                                                                                                                                                               
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=364300.07..364300.08 rows=1 width=8) (actual time=2866.199..2866.204 rows=1 loops=1)
   Buffers: shared hit=200029 read=97332
   ->  Nested Loop  (cost=2.19..364300.06 rows=4 width=0) (actual time=3.931..2865.463 rows=4793 loops=1)
         Buffers: shared hit=200029 read=97332
         ->  Nested Loop  (cost=1.76..364286.14 rows=6 width=4) (actual time=3.469..2425.087 rows=13475 loops=1)
               Join Filter: (ci.role_id = rt.id)
               Rows Removed by Join Filter: 194303
               Buffers: shared hit=159098 read=84363
               ->  Nested Loop  (cost=1.76..364283.93 rows=14 width=8) (actual time=3.271..2388.267 rows=49723 loops=1)
                     Buffers: shared hit=159097 read=84363
                     ->  Nested Loop  (cost=1.32..364240.24 rows=1 width=12) (actual time=3.232..1867.522 rows=1284 loops=1)
                           Buffers: shared hit=128562 read=62756
                           ->  Nested Loop  (cost=1.32..364237.81 rows=1 width=16) (actual time=3.222..1845.404 rows=1284 loops=1)
                                 Buffers: shared hit=127278 read=62756
                                 ->  Nested Loop  (cost=1.32..364235.39 rows=1 width=20) (actual time=3.206..1821.147 rows=1284 loops=1)
                                       Buffers: shared hit=125994 read=62756
                                       ->  Nested Loop  (cost=0.86..363303.45 rows=22 width=12) (actual time=0.305..564.383 rows=10187 loops=1)
                                             Join Filter: (t.kind_id = kt.id)
                                             Rows Removed by Join Filter: 10462
                                             Buffers: shared hit=41093 read=13989
                                             ->  Nested Loop  (cost=0.86..363300.23 rows=38 width=16) (actual time=0.286..557.927 rows=11961 loops=1)
                                                   Buffers: shared hit=41092 read=13989
                                                   ->  Index Scan using info_type_id_movie_info on movie_info mi2  (cost=0.43..362894.51 rows=48 width=8) (actual time=0.213..144.168 rows=12502 loops=1)
                                                         Index Cond: (info_type_id = 105)
                                                         Filter: ((info)::text = ANY ('{"$10,000,000","$150,000","$2,000","$2,000,000","$250,000","$300,000","$35,000","$5,000,000","$50,000","$6,000,000","$60,000","$7,000,000","$75,000","$8,000","$80,000,000"}'::text[]))
                                                         Rows Removed by Filter: 109361
                                                         Buffers: shared hit=1131 read=3942
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.033..0.033 rows=1 loops=12502)
                                                         Index Cond: (id = mi2.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1975))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=39961 read=10047
                                             ->  Materialize  (cost=0.00..1.12 rows=4 width=4) (actual time=0.000..0.000 rows=2 loops=11961)
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.10 rows=4 width=4) (actual time=0.009..0.012 rows=4 loops=1)
                                                         Filter: ((kind)::text = ANY ('{movie,"tv movie","tv series","video game"}'::text[]))
                                                         Rows Removed by Filter: 3
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi1  (cost=0.46..42.35 rows=1 width=8) (actual time=0.112..0.123 rows=0 loops=10187)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 18) AND ((info)::text = ANY ('{"Berlin, Germany","Burbank, California, USA",Canada,"London, England, UK","Manhattan, New York City, New York, USA","Melbourne, Victoria, Australia","Miami, Florida, USA","New York City, New York, USA",USA,"Washington, District of Columbia, USA"}'::text[])))
                                             Rows Removed by Filter: 22
                                             Buffers: shared hit=84901 read=48767
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.011..0.017 rows=1 loops=1284)
                                       Filter: (id = 18)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=1284
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.015..0.016 rows=1 loops=1284)
                                 Filter: (id = 105)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=1284
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.32 rows=38 width=12) (actual time=0.036..0.398 rows=39 loops=1284)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=30535 read=21607
               ->  Materialize  (cost=0.00..1.22 rows=5 width=4) (actual time=0.000..0.000 rows=4 loops=49723)
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.20 rows=5 width=4) (actual time=0.006..0.008 rows=5 loops=1)
                           Filter: ((role)::text = ANY ('{actress,"costume designer",director,editor,writer}'::text[]))
                           Rows Removed by Filter: 7
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.032..0.032 rows=0 loops=13475)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'm'::text) OR (gender IS NULL))
               Rows Removed by Filter: 1
               Buffers: shared hit=40931 read=12969
 Planning:
   Buffers: shared hit=486 read=91
 Planning Time: 11.325 ms
 Execution Time: 2866.619 ms
(69 rows)

