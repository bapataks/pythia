                                                                                               QUERY PLAN                                                                                               
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=985200.68..985200.69 rows=1 width=8) (actual time=30191.295..30191.306 rows=1 loops=1)
   Buffers: shared hit=2275548 read=450794, temp read=3885 written=3885
   ->  Nested Loop  (cost=505417.99..985199.75 rows=371 width=0) (actual time=1291.065..30190.631 rows=743 loops=1)
         Buffers: shared hit=2275548 read=450794, temp read=3885 written=3885
         ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.037..0.049 rows=1 loops=1)
               Filter: (id = 4)
               Rows Removed by Filter: 112
               Buffers: shared hit=1
         ->  Nested Loop  (cost=505417.99..985193.63 rows=371 width=4) (actual time=1291.026..30190.285 rows=743 loops=1)
               Buffers: shared hit=2275547 read=450794, temp read=3885 written=3885
               ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.005..0.018 rows=1 loops=1)
                     Filter: (id = 3)
                     Rows Removed by Filter: 112
                     Buffers: shared hit=1
               ->  Nested Loop  (cost=505417.99..985187.51 rows=371 width=8) (actual time=1291.019..30189.887 rows=743 loops=1)
                     Buffers: shared hit=2275546 read=450794, temp read=3885 written=3885
                     ->  Hash Join  (cost=505417.56..981485.55 rows=1596 width=12) (actual time=1260.714..28227.628 rows=51549 loops=1)
                           Hash Cond: (ci.role_id = rt.id)
                           Buffers: shared hit=2088823 read=431321, temp read=3885 written=3885
                           ->  Nested Loop  (cost=505416.40..981416.37 rows=19150 width=16) (actual time=1259.207..27855.107 rows=2255764 loops=1)
                                 Buffers: shared hit=2088822 read=431321, temp read=3885 written=3885
                                 ->  Hash Join  (cost=505415.96..923036.24 rows=1336 width=20) (actual time=1259.161..2254.648 rows=105255 loops=1)
                                       Hash Cond: (mi2.movie_id = t.id)
                                       Buffers: shared hit=24758 read=32021, temp read=3885 written=3885
                                       ->  Bitmap Heap Scan on movie_info mi2  (cost=13075.89..430374.95 rows=82095 width=8) (actual time=34.375..631.370 rows=1052395 loops=1)
                                             Recheck Cond: (info_type_id = 4)
                                             Filter: ((info)::text = ANY ('{English,French,German,Greek,Japanese,Spanish,Swedish}'::text[]))
                                             Rows Removed by Filter: 246594
                                             Heap Blocks: exact=8393
                                             Buffers: shared hit=1 read=9411
                                             ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..13055.37 rows=1221191 width=0) (actual time=33.312..33.312 rows=1298989 loops=1)
                                                   Index Cond: (info_type_id = 4)
                                                   Buffers: shared read=1019
                                       ->  Hash  (cost=491825.92..491825.92 rows=41132 width=12) (actual time=1222.703..1222.709 rows=122503 loops=1)
                                             Buckets: 131072 (originally 65536)  Batches: 1 (originally 1)  Memory Usage: 6288kB
                                             Buffers: shared hit=24757 read=22610, temp read=3885 written=3885
                                             ->  Hash Join  (cost=113321.62..491825.92 rows=41132 width=12) (actual time=632.888..1196.788 rows=122503 loops=1)
                                                   Hash Cond: (mi1.movie_id = t.id)
                                                   Buffers: shared hit=24757 read=22610, temp read=3885 written=3885
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=16478.78..389815.46 rows=121145 width=8) (actual time=37.612..317.916 rows=1147280 loops=1)
                                                         Recheck Cond: (info_type_id = 3)
                                                         Filter: ((info)::text = ANY ('{Action,Adult,Adventure,Comedy,Documentary,Drama,Sci-Fi,Short,Thriller}'::text[]))
                                                         Rows Removed by Filter: 386629
                                                         Heap Blocks: exact=9772
                                                         Buffers: shared hit=2733 read=8242
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..16448.47 rows=1538671 width=0) (actual time=36.397..36.397 rows=1533909 loops=1)
                                                               Index Cond: (info_type_id = 3)
                                                               Buffers: shared hit=1 read=1202
                                                   ->  Hash  (cost=82758.38..82758.38 rows=858437 width=4) (actual time=594.237..594.241 rows=174146 loops=1)
                                                         Buckets: 262144  Batches: 8  Memory Usage: 2813kB
                                                         Buffers: shared hit=22024 read=14368, temp written=443
                                                         ->  Hash Join  (cost=1.13..82758.38 rows=858437 width=4) (actual time=0.059..567.510 rows=174146 loops=1)
                                                               Hash Cond: (t.kind_id = kt.id)
                                                               Buffers: shared hit=22024 read=14368
                                                               ->  Seq Scan on title t  (cost=0.00..74315.95 rows=2003019 width=8) (actual time=0.032..449.689 rows=2004612 loops=1)
                                                                     Filter: ((production_year <= 2015) AND (1975 < production_year))
                                                                     Rows Removed by Filter: 523700
                                                                     Buffers: shared hit=22023 read=14368
                                                               ->  Hash  (cost=1.10..1.10 rows=3 width=4) (actual time=0.016..0.017 rows=3 loops=1)
                                                                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                                     Buffers: shared hit=1
                                                                     ->  Seq Scan on kind_type kt  (cost=0.00..1.10 rows=3 width=4) (actual time=0.009..0.010 rows=3 loops=1)
                                                                           Filter: ((kind)::text = ANY ('{"tv movie","tv series","video game"}'::text[]))
                                                                           Rows Removed by Filter: 4
                                                                           Buffers: shared hit=1
                                 ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.32 rows=38 width=12) (actual time=0.037..0.237 rows=21 loops=105255)
                                       Index Cond: (movie_id = t.id)
                                       Buffers: shared hit=2064064 read=399300
                           ->  Hash  (cost=1.15..1.15 rows=1 width=4) (actual time=0.014..0.014 rows=1 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                 Buffers: shared hit=1
                                 ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=1 width=4) (actual time=0.007..0.008 rows=1 loops=1)
                                       Filter: ((role)::text = 'cinematographer'::text)
                                       Rows Removed by Filter: 11
                                       Buffers: shared hit=1
                     ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.038..0.038 rows=0 loops=51549)
                           Index Cond: (id = ci.person_id)
                           Filter: ((gender)::text = 'f'::text)
                           Rows Removed by Filter: 1
                           Buffers: shared hit=186723 read=19473
 Planning:
   Buffers: shared hit=488 read=89
 Planning Time: 10.703 ms
 Execution Time: 30192.079 ms
(84 rows)

