                                                                                                                                                                                           QUERY PLAN                                                                                                                                                                                            
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=412597.87..412597.88 rows=1 width=8) (actual time=3868.541..3868.548 rows=1 loops=1)
   Buffers: shared hit=340147 read=56201
   ->  Nested Loop  (cost=7082.09..412597.85 rows=6 width=0) (actual time=24.128..3867.448 rows=4659 loops=1)
         Buffers: shared hit=340147 read=56201
         ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.036..0.044 rows=1 loops=1)
               Filter: (id = 8)
               Rows Removed by Filter: 112
               Buffers: shared hit=1
         ->  Nested Loop  (cost=7082.09..412595.38 rows=6 width=4) (actual time=24.091..3866.476 rows=4659 loops=1)
               Buffers: shared hit=340146 read=56201
               ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.008..0.019 rows=1 loops=1)
                     Filter: (id = 18)
                     Rows Removed by Filter: 112
                     Buffers: shared hit=1
               ->  Nested Loop  (cost=7082.09..412592.91 rows=6 width=8) (actual time=24.079..3865.467 rows=4659 loops=1)
                     Buffers: shared hit=340145 read=56201
                     ->  Hash Join  (cost=7081.66..412574.35 rows=8 width=12) (actual time=24.040..3705.177 rows=4659 loops=1)
                           Hash Cond: (ci.role_id = rt.id)
                           Buffers: shared hit=322372 read=55338
                           ->  Nested Loop  (cost=7080.49..412572.84 rows=100 width=16) (actual time=19.174..3680.013 rows=148632 loops=1)
                                 Buffers: shared hit=322371 read=55338
                                 ->  Nested Loop  (cost=7080.05..412262.31 rows=7 width=20) (actual time=19.137..2085.132 rows=6971 loops=1)
                                       Buffers: shared hit=182131 read=28042
                                       ->  Hash Join  (cost=7079.62..403115.40 rows=211 width=12) (actual time=18.978..999.017 rows=10655 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=80491 read=9006
                                             ->  Nested Loop  (cost=7078.44..403112.98 rows=295 width=16) (actual time=18.939..993.860 rows=10655 loops=1)
                                                   Buffers: shared hit=80490 read=9006
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=7078.01..392195.46 rows=1347 width=8) (actual time=18.901..283.318 rows=20501 loops=1)
                                                         Recheck Cond: (info_type_id = 18)
                                                         Filter: ((info)::text = ANY ('{"Bavaria Filmstudios, Geiselgasteig, GrÃ¼nwald, Bavaria, Germany","CBS Studio 50, New York City, New York, USA",Mexico,"Paramount Studios - 5555 Melrose Avenue, Hollywood, Los Angeles, California, USA","Warner Brothers Burbank Studios - 4000 Warner Boulevard, Burbank, California, USA"}'::text[]))
                                                         Rows Removed by Filter: 640422
                                                         Heap Blocks: exact=6972
                                                         Buffers: shared hit=7255 read=237
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..7077.68 rows=662032 width=0) (actual time=18.022..18.023 rows=660923 loops=1)
                                                               Index Cond: (info_type_id = 18)
                                                               Buffers: shared hit=520
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.11 rows=1 width=8) (actual time=0.034..0.034 rows=1 loops=20501)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 1990) AND (production_year >= 1950))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=73235 read=8769
                                             ->  Hash  (cost=1.11..1.11 rows=5 width=4) (actual time=0.017..0.019 rows=5 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.11 rows=5 width=4) (actual time=0.009..0.011 rows=5 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv movie","tv series","video movie"}'::text[]))
                                                         Rows Removed by Filter: 2
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..43.34 rows=1 width=8) (actual time=0.095..0.101 rows=1 loops=10655)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 8) AND ((info)::text = ANY ('{Argentina,Austria,Brazil,Czechoslovakia,Denmark,India,Italy,Mexico,Philippines,Portugal,Sweden,Switzerland,UK,USA,Yugoslavia}'::text[])))
                                             Rows Removed by Filter: 14
                                             Buffers: shared hit=101640 read=19036
                                 ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.98 rows=38 width=12) (actual time=0.036..0.223 rows=21 loops=6971)
                                       Index Cond: (movie_id = t.id)
                                       Buffers: shared hit=140240 read=27296
                           ->  Hash  (cost=1.15..1.15 rows=1 width=4) (actual time=0.016..0.017 rows=1 loops=1)
                                 Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                 Buffers: shared hit=1
                                 ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=1 width=4) (actual time=0.010..0.011 rows=1 loops=1)
                                       Filter: ((role)::text = 'cinematographer'::text)
                                       Rows Removed by Filter: 11
                                       Buffers: shared hit=1
                     ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.034..0.034 rows=1 loops=4659)
                           Index Cond: (id = ci.person_id)
                           Filter: (((gender)::text = ANY ('{f,m}'::text[])) OR (gender IS NULL))
                           Buffers: shared hit=17773 read=863
 Planning:
   Buffers: shared hit=574
 Planning Time: 10.655 ms
 Execution Time: 3869.050 ms
(72 rows)

