                                                                                                                                                                                                                                                   QUERY PLAN                                                                                                                                                                                                                                                    
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=373878.49..373878.50 rows=1 width=8) (actual time=516.991..516.997 rows=1 loops=1)
   Buffers: shared hit=29978 read=21501
   ->  Nested Loop  (cost=3726.55..373878.49 rows=2 width=0) (actual time=55.715..516.562 rows=4666 loops=1)
         Buffers: shared hit=29978 read=21501
         ->  Hash Join  (cost=3726.12..373866.89 rows=5 width=4) (actual time=55.602..319.620 rows=6088 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=10546 read=16581
               ->  Nested Loop  (cost=3724.89..373865.61 rows=14 width=8) (actual time=55.202..317.614 rows=12323 loops=1)
                     Buffers: shared hit=10545 read=16581
                     ->  Nested Loop  (cost=3724.45..373821.92 rows=1 width=12) (actual time=55.164..212.644 rows=82 loops=1)
                           Buffers: shared hit=3338 read=11581
                           ->  Nested Loop  (cost=3724.45..373819.49 rows=1 width=16) (actual time=55.158..211.741 rows=82 loops=1)
                                 Buffers: shared hit=3256 read=11581
                                 ->  Nested Loop  (cost=3724.45..373817.07 rows=1 width=20) (actual time=55.138..210.680 rows=82 loops=1)
                                       Buffers: shared hit=3174 read=11581
                                       ->  Hash Join  (cost=3724.01..373136.41 rows=16 width=12) (actual time=53.818..183.028 rows=97 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=2151 read=9582
                                             ->  Nested Loop  (cost=3722.86..373135.14 rows=28 width=16) (actual time=53.787..182.890 rows=97 loops=1)
                                                   Buffers: shared hit=2150 read=9582
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=3722.43..372839.30 rows=35 width=8) (actual time=53.737..178.810 rows=129 loops=1)
                                                         Recheck Cond: (info_type_id = 17)
                                                         Filter: ((info)::text = ANY ('{"Despite the fact that this was filmed in Super 35, \"Filmed in Panavision\" is listed in the end credits.","Despite the fact that this was filmed in the standard spherical format, \"Filmed in Panavision\" is listed in the end credits.","Premiere voted this movie as one of \"The 25 Most Dangerous Movies\".","Premiere voted this movie as one of \"The 50 Greatest Comedies Of All Time\" in 2006."}'::text[]))
                                                         Rows Removed by Filter: 368089
                                                         Heap Blocks: exact=10925
                                                         Buffers: shared hit=1790 read=9426
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..3722.42 rows=347998 width=0) (actual time=11.260..11.260 rows=368218 loops=1)
                                                               Index Cond: (info_type_id = 17)
                                                               Buffers: shared read=291
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.030..0.030 rows=1 loops=129)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1975))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=360 read=156
                                             ->  Hash  (cost=1.10..1.10 rows=4 width=4) (actual time=0.013..0.014 rows=4 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.10 rows=4 width=4) (actual time=0.006..0.007 rows=4 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv movie","video game"}'::text[]))
                                                         Rows Removed by Filter: 3
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..42.53 rows=1 width=8) (actual time=0.264..0.284 rows=1 loops=97)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 5) AND ((info)::text = ANY ('{Canada:G,Denmark:A,Hungary:18,Malaysia:18SX,"New Zealand:PG",Peru:14,"South Africa:16LV",Spain:13}'::text[])))
                                             Rows Removed by Filter: 274
                                             Buffers: shared hit=1023 read=1999
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.006..0.010 rows=1 loops=82)
                                       Filter: (id = 17)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=82
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.004..0.009 rows=1 loops=82)
                                 Filter: (id = 5)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=82
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.32 rows=38 width=12) (actual time=0.035..1.257 rows=150 loops=82)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=7207 read=5000
               ->  Hash  (cost=1.18..1.18 rows=4 width=4) (actual time=0.029..0.029 rows=4 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.18 rows=4 width=4) (actual time=0.020..0.022 rows=4 loops=1)
                           Filter: ((role)::text = ANY ('{"costume designer",editor,"miscellaneous crew",producer}'::text[]))
                           Rows Removed by Filter: 8
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.032..0.032 rows=1 loops=6088)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'f'::text) OR (gender IS NULL))
               Rows Removed by Filter: 0
               Buffers: shared hit=19432 read=4920
 Planning:
   Buffers: shared hit=483 read=91
 Planning Time: 10.579 ms
 Execution Time: 517.385 ms
(73 rows)

