                                                                                                                                                                                                            QUERY PLAN                                                                                                                                                                                                            
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=442670.68..442670.69 rows=1 width=8) (actual time=402.583..402.587 rows=1 loops=1)
   Buffers: shared hit=23625 read=12889
   ->  Nested Loop  (cost=7081.82..442670.68 rows=1 width=0) (actual time=175.803..402.571 rows=33 loops=1)
         Buffers: shared hit=23625 read=12889
         ->  Hash Join  (cost=7081.39..442666.04 rows=2 width=4) (actual time=175.765..401.215 rows=45 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=23530 read=12804
               ->  Nested Loop  (cost=7080.21..442664.82 rows=14 width=8) (actual time=134.208..401.005 rows=1461 loops=1)
                     Buffers: shared hit=23529 read=12804
                     ->  Nested Loop  (cost=7079.77..442621.16 rows=1 width=12) (actual time=83.646..389.575 rows=41 loops=1)
                           Buffers: shared hit=22995 read=11788
                           ->  Nested Loop  (cost=7079.77..442618.74 rows=1 width=16) (actual time=83.638..389.217 rows=41 loops=1)
                                 Buffers: shared hit=22954 read=11788
                                 ->  Nested Loop  (cost=7079.77..442616.32 rows=1 width=20) (actual time=83.612..388.803 rows=41 loops=1)
                                       Buffers: shared hit=22913 read=11788
                                       ->  Hash Join  (cost=7079.34..437996.86 rows=108 width=12) (actual time=22.200..253.508 rows=1519 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=7900 read=5865
                                             ->  Nested Loop  (cost=7078.14..437995.14 rows=126 width=16) (actual time=22.157..253.075 rows=1519 loops=1)
                                                   Buffers: shared hit=7899 read=5865
                                                   ->  Bitmap Heap Scan on movie_info mi1  (cost=7077.71..436858.05 rows=135 width=8) (actual time=22.124..219.515 rows=1568 loops=1)
                                                         Recheck Cond: (info_type_id = 18)
                                                         Filter: ((info)::text = ANY ('{"3401 Exposition Blvd., Santa Monica, California, USA","Castaic, California, USA","Honolulu, Oahu, Hawaii, USA","Los Feliz, Los Angeles, California, USA","MacArthur Park, Los Angeles, California, USA","Royal Palace, Caserta, Campania, Italy","Santa Monica, California, USA","Studio City, Los Angeles, California, USA"}'::text[]))
                                                         Rows Removed by Filter: 659355
                                                         Heap Blocks: exact=6972
                                                         Buffers: shared hit=2364 read=5128
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..7077.68 rows=662032 width=0) (actual time=21.251..21.252 rows=660923 loops=1)
                                                               Index Cond: (info_type_id = 18)
                                                               Buffers: shared read=520
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.42 rows=1 width=8) (actual time=0.021..0.021 rows=1 loops=1568)
                                                         Index Cond: (id = mi1.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1925))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=5535 read=737
                                             ->  Hash  (cost=1.12..1.12 rows=6 width=4) (actual time=0.019..0.019 rows=6 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.12 rows=6 width=4) (actual time=0.008..0.011 rows=6 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv movie","tv series","video game","video movie"}'::text[]))
                                                         Rows Removed by Filter: 1
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..42.76 rows=1 width=8) (actual time=0.088..0.089 rows=0 loops=1519)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 16) AND ((info)::text = ANY ('{"Finland:16 January 2005","France:16 November 2004","Israel:19 February 2004","New Zealand:13 July 2004","New Zealand:28 November 2004","Philippines:30 May 2003",USA:2003,USA:2004,USA:2005,USA:2006,USA:2009,USA:2010,USA:2013}'::text[])))
                                             Rows Removed by Filter: 33
                                             Buffers: shared hit=15013 read=5923
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.005..0.008 rows=1 loops=41)
                                       Filter: (id = 18)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=41
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.004..0.008 rows=1 loops=41)
                                 Filter: (id = 16)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=41
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.28 rows=38 width=12) (actual time=0.022..0.273 rows=36 loops=41)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=534 read=1016
               ->  Hash  (cost=1.15..1.15 rows=2 width=4) (actual time=0.034..0.034 rows=2 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=2 width=4) (actual time=0.026..0.028 rows=2 loops=1)
                           Filter: ((role)::text = ANY ('{"costume designer",director}'::text[]))
                           Rows Removed by Filter: 10
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.029..0.029 rows=1 loops=45)
               Index Cond: (id = ci.person_id)
               Filter: ((gender)::text = ANY ('{f,m}'::text[]))
               Rows Removed by Filter: 0
               Buffers: shared hit=95 read=85
 Planning:
   Buffers: shared hit=529 read=45
 Planning Time: 14.499 ms
 Execution Time: 403.085 ms
(73 rows)

