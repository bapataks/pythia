                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    QUERY PLAN                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=404450.89..404450.90 rows=1 width=8) (actual time=2350.036..2350.044 rows=1 loops=1)
   Buffers: shared hit=189948 read=49251
   ->  Nested Loop  (cost=3726.64..404450.88 rows=3 width=0) (actual time=16.866..2348.446 rows=11480 loops=1)
         Buffers: shared hit=189948 read=49251
         ->  Hash Join  (cost=3726.21..404436.96 rows=6 width=4) (actual time=16.825..1791.957 rows=17571 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=124550 read=44365
               ->  Nested Loop  (cost=3724.95..404435.66 rows=14 width=8) (actual time=16.598..1774.591 rows=103259 loops=1)
                     Buffers: shared hit=124549 read=44365
                     ->  Nested Loop  (cost=3724.51..404392.00 rows=1 width=12) (actual time=16.560..802.383 rows=3580 loops=1)
                           Buffers: shared hit=32575 read=23666
                           ->  Nested Loop  (cost=3724.51..404389.58 rows=1 width=16) (actual time=16.554..743.699 rows=3580 loops=1)
                                 Buffers: shared hit=28995 read=23666
                                 ->  Nested Loop  (cost=3724.51..404387.15 rows=1 width=20) (actual time=16.535..684.472 rows=3580 loops=1)
                                       Buffers: shared hit=25415 read=23666
                                       ->  Hash Join  (cost=3724.04..402904.94 rows=35 width=12) (actual time=15.964..369.181 rows=2267 loops=1)
                                             Hash Cond: (t.kind_id = kt.id)
                                             Buffers: shared hit=9968 read=10901
                                             ->  Nested Loop  (cost=3722.86..402903.56 rows=50 width=16) (actual time=15.918..368.024 rows=2267 loops=1)
                                                   Buffers: shared hit=9967 read=10901
                                                   ->  Bitmap Heap Scan on movie_info mi2  (cost=3722.43..402455.57 rows=53 width=8) (actual time=15.868..282.940 rows=2413 loops=1)
                                                         Recheck Cond: (info_type_id = 17)
                                                         Filter: ((info)::text = ANY ('{"In September 1928, Warner Bros. Pictures purchased a majority interest in First National Pictures and from that point on, all \"First National\" productions were actually made under Warner Bros. control, even though the two companies continued to retain separate identities until the mid-1930s, after which time \"A Warner Bros.-First National Picture\" was often used.","Last show of the series.","One of over 700 Paramount Productions, filmed between 1929 and 1949, which were sold to MCA/Universal in 1958 for television distribution, and have been owned and controlled by Universal ever since.","One of over 700 Paramount productions, filmed between 1929 and 1949, which were sold to MCA/Universal in 1958 for television distribution, and have been owned and controlled by Universal ever since.","This film is believed lost. Please check your attic.","This film is presumed lost. Please check your attic."}'::text[]))
                                                         Rows Removed by Filter: 365805
                                                         Heap Blocks: exact=10925
                                                         Buffers: shared hit=745 read=10471
                                                         ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..3722.42 rows=347998 width=0) (actual time=14.195..14.195 rows=368218 loops=1)
                                                               Index Cond: (info_type_id = 17)
                                                               Buffers: shared hit=1 read=290
                                                   ->  Index Scan using title_pkey on title t  (cost=0.43..8.45 rows=1 width=8) (actual time=0.035..0.035 rows=1 loops=2413)
                                                         Index Cond: (id = mi2.movie_id)
                                                         Filter: ((production_year <= 2015) AND (production_year >= 1925))
                                                         Rows Removed by Filter: 0
                                                         Buffers: shared hit=9222 read=430
                                             ->  Hash  (cost=1.11..1.11 rows=5 width=4) (actual time=0.020..0.021 rows=5 loops=1)
                                                   Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                   Buffers: shared hit=1
                                                   ->  Seq Scan on kind_type kt  (cost=0.00..1.11 rows=5 width=4) (actual time=0.011..0.013 rows=5 loops=1)
                                                         Filter: ((kind)::text = ANY ('{episode,movie,"tv series","video game","video movie"}'::text[]))
                                                         Rows Removed by Filter: 2
                                                         Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi1  (cost=0.47..42.34 rows=1 width=8) (actual time=0.083..0.138 rows=2 loops=2267)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 7) AND ((info)::text = ANY ('{"CAM:Arriflex 535","CAM:Beaumont VistaVision Camera, Panavision Primo Lenses","CAM:PanArri 435, Panavision Primo Lenses","LAB:Adlabs Films Pvt. Ltd., Mumbai, India","LAB:DeLuxe, Hollywood (CA), USA","LAB:Laser Pacific Media Corporation, Los Angeles (CA), USA","LAB:MGM Laboratories Inc., USA","LAB:Medallion Film Laboratories, Toronto, Canada",LAB:Metrocolor,"OFM:35 mm","PCS:HDCAM SR",PCS:HDCAM,"PFM:35 mm","PFM:8 mm",PFM:D-Cinema}'::text[])))
                                             Rows Removed by Filter: 14
                                             Buffers: shared hit=15447 read=12765
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.008..0.015 rows=1 loops=3580)
                                       Filter: (id = 7)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=3580
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.009..0.015 rows=1 loops=3580)
                                 Filter: (id = 17)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=3580
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..43.28 rows=38 width=12) (actual time=0.033..0.265 rows=29 loops=3580)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=91974 read=20699
               ->  Hash  (cost=1.20..1.20 rows=5 width=4) (actual time=0.039..0.040 rows=5 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.20 rows=5 width=4) (actual time=0.027..0.030 rows=5 loops=1)
                           Filter: ((role)::text = ANY ('{composer,editor,guest,"miscellaneous crew",writer}'::text[]))
                           Rows Removed by Filter: 7
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.031..0.031 rows=1 loops=17571)
               Index Cond: (id = ci.person_id)
               Filter: (((gender)::text = 'f'::text) OR (gender IS NULL))
               Rows Removed by Filter: 0
               Buffers: shared hit=65398 read=4886
 Planning:
   Buffers: shared hit=576 read=1
 Planning Time: 14.128 ms
 Execution Time: 2350.602 ms
(73 rows)

