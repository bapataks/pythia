                                                                                            QUERY PLAN                                                                                            
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
 Aggregate  (cost=569254.49..569254.50 rows=1 width=8) (actual time=5658.060..5658.070 rows=1 loops=1)
   Buffers: shared hit=448439 read=96541, temp read=917 written=917
   ->  Nested Loop  (cost=91920.43..569254.38 rows=42 width=0) (actual time=519.650..5657.359 rows=2082 loops=1)
         Buffers: shared hit=448439 read=96541, temp read=917 written=917
         ->  Hash Join  (cost=91920.00..569105.93 rows=64 width=4) (actual time=519.624..5390.413 rows=7395 loops=1)
               Hash Cond: (ci.role_id = rt.id)
               Buffers: shared hit=422038 read=93362, temp read=917 written=917
               ->  Nested Loop  (cost=91918.82..569103.38 rows=387 width=8) (actual time=519.500..5362.834 rows=165050 loops=1)
                     Buffers: shared hit=422037 read=93362, temp read=917 written=917
                     ->  Nested Loop  (cost=91918.38..567891.64 rows=27 width=12) (actual time=519.470..3518.255 rows=11933 loops=1)
                           Buffers: shared hit=269032 read=50510, temp read=917 written=917
                           ->  Seq Scan on info_type it2  (cost=0.00..2.41 rows=1 width=4) (actual time=0.030..0.041 rows=1 loops=1)
                                 Filter: (id = 4)
                                 Rows Removed by Filter: 112
                                 Buffers: shared hit=1
                           ->  Nested Loop  (cost=91918.38..567888.96 rows=27 width=16) (actual time=519.439..3515.679 rows=11933 loops=1)
                                 Buffers: shared hit=269031 read=50510, temp read=917 written=917
                                 ->  Seq Scan on info_type it1  (cost=0.00..2.41 rows=1 width=4) (actual time=0.009..0.021 rows=1 loops=1)
                                       Filter: (id = 8)
                                       Rows Removed by Filter: 112
                                       Buffers: shared hit=1
                                 ->  Nested Loop  (cost=91918.38..567886.27 rows=27 width=20) (actual time=519.426..3512.950 rows=11933 loops=1)
                                       Buffers: shared hit=269030 read=50510, temp read=917 written=917
                                       ->  Hash Join  (cost=91917.95..524811.80 rows=995 width=12) (actual time=519.374..1127.056 rows=30607 loops=1)
                                             Hash Cond: (mi1.movie_id = t.id)
                                             Buffers: shared hit=37014 read=8271, temp read=917 written=917
                                             ->  Bitmap Heap Scan on movie_info mi1  (cost=14215.67..447037.33 rows=16598 width=8) (actual time=33.746..526.963 rows=177092 loops=1)
                                                   Recheck Cond: (info_type_id = 8)
                                                   Filter: ((info)::text = ANY ('{Australia,Belgium,Canada,"Hong Kong",India,Iran,Italy,Portugal}'::text[]))
                                                   Rows Removed by Filter: 1148269
                                                   Heap Blocks: exact=7853
                                                   Buffers: shared hit=8824 read=69
                                                   ->  Bitmap Index Scan on info_type_id_movie_info  (cost=0.00..14211.52 rows=1329478 width=0) (actual time=32.782..32.782 rows=1325361 loops=1)
                                                         Index Cond: (info_type_id = 8)
                                                         Buffers: shared hit=1040
                                             ->  Hash  (cost=75807.58..75807.58 rows=151576 width=4) (actual time=478.222..478.225 rows=335746 loops=1)
                                                   Buckets: 262144 (originally 262144)  Batches: 2 (originally 1)  Memory Usage: 7957kB
                                                   Buffers: shared hit=28190 read=8202, temp written=491
                                                   ->  Hash Join  (cost=1.13..75807.58 rows=151576 width=4) (actual time=0.039..422.283 rows=335746 loops=1)
                                                         Hash Cond: (t.kind_id = kt.id)
                                                         Buffers: shared hit=28190 read=8202
                                                         ->  Seq Scan on title t  (cost=0.00..74315.95 rows=353677 width=8) (actual time=0.023..380.596 rows=347589 loops=1)
                                                               Filter: ((production_year <= 1975) AND (1925 < production_year))
                                                               Rows Removed by Filter: 2180723
                                                               Buffers: shared hit=28189 read=8202
                                                         ->  Hash  (cost=1.10..1.10 rows=3 width=4) (actual time=0.012..0.013 rows=3 loops=1)
                                                               Buckets: 1024  Batches: 1  Memory Usage: 9kB
                                                               Buffers: shared hit=1
                                                               ->  Seq Scan on kind_type kt  (cost=0.00..1.10 rows=3 width=4) (actual time=0.006..0.007 rows=3 loops=1)
                                                                     Filter: ((kind)::text = ANY ('{episode,movie,"tv movie"}'::text[]))
                                                                     Rows Removed by Filter: 4
                                                                     Buffers: shared hit=1
                                       ->  Index Scan using movie_id_movie_info on movie_info mi2  (cost=0.43..43.28 rows=1 width=8) (actual time=0.057..0.077 rows=0 loops=30607)
                                             Index Cond: (movie_id = t.id)
                                             Filter: ((info_type_id = 4) AND ((info)::text = ANY ('{Dutch,English,French,Mandarin,Persian,Portuguese,Tamil}'::text[])))
                                             Rows Removed by Filter: 9
                                             Buffers: shared hit=232016 read=42239
                     ->  Index Scan using movie_id_cast_info on cast_info ci  (cost=0.44..44.50 rows=38 width=12) (actual time=0.033..0.151 rows=14 loops=11933)
                           Index Cond: (movie_id = t.id)
                           Buffers: shared hit=153005 read=42852
               ->  Hash  (cost=1.15..1.15 rows=2 width=4) (actual time=0.035..0.036 rows=2 loops=1)
                     Buckets: 1024  Batches: 1  Memory Usage: 9kB
                     Buffers: shared hit=1
                     ->  Seq Scan on role_type rt  (cost=0.00..1.15 rows=2 width=4) (actual time=0.027..0.029 rows=2 loops=1)
                           Filter: ((role)::text = ANY ('{"costume designer",editor}'::text[]))
                           Rows Removed by Filter: 10
                           Buffers: shared hit=1
         ->  Index Scan using name_pkey on name n  (cost=0.43..2.32 rows=1 width=4) (actual time=0.036..0.036 rows=0 loops=7395)
               Index Cond: (id = ci.person_id)
               Filter: ((gender)::text = ANY ('{f,m}'::text[]))
               Rows Removed by Filter: 1
               Buffers: shared hit=26401 read=3179
 Planning:
   Buffers: shared hit=574
 Planning Time: 11.997 ms
 Execution Time: 5658.704 ms
(76 rows)

